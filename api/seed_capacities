# seed_capacities.py

from sqlalchemy import create_engine
from sqlalchemy.orm import Session
from app.models import RoomType
import os

# point at your prisma/dev.db
db_path = os.path.join(os.path.dirname(__file__), "prisma", "dev.db")
engine = create_engine(f"sqlite:///{db_path}", connect_args={"check_same_thread": False})

with Session(engine) as session:
    # map of IDs to desired capacities
    caps = {
        "room_1": 2,
        "room_2": 4,
        "room_3": 5,
    }

    for room_id, cap in caps.items():
        rt = session.get(RoomType, room_id)
        if not rt:
            print(f"⚠️ RoomType {room_id!r} not found in DB.")
            continue
        print(f"Setting {room_id!r}.capacity = {cap}")
        rt.capacity = cap

    session.commit()
    print("✅ Capacities seeded.")
